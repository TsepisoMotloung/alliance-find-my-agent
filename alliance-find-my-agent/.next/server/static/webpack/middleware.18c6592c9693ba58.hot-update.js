"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./src/middleware.ts":
/*!***************************!*\
  !*** ./src/middleware.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n/* harmony import */ var next_auth_jwt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/jwt */ \"(middleware)/./node_modules/next-auth/jwt/index.js\");\n/* harmony import */ var next_auth_jwt__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_jwt__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _types_models__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/types/models */ \"(middleware)/./src/types/models.ts\");\n\n\n\nasync function middleware(request) {\n    const { pathname } = request.nextUrl;\n    // Get the JWT token\n    const token = await (0,next_auth_jwt__WEBPACK_IMPORTED_MODULE_1__.getToken)({\n        req: request,\n        secret: process.env.NEXTAUTH_SECRET\n    });\n    // Public routes that don't require authentication\n    const publicRoutes = [\n        \"/\",\n        \"/login\",\n        \"/register\",\n        \"/register/agent\",\n        \"/register/employee\",\n        \"/approval\",\n        \"/forgot-password\",\n        \"/reset-password\",\n        \"/map\",\n        \"/rate\",\n        \"/callback\"\n    ];\n    // Public API routes that don't require authentication\n    const publicApiRoutes = [\n        \"/api/public/\",\n        \"/api/agents/nearby\",\n        \"/api/auth/\",\n        \"/api/users/search\",\n        \"/api/ratings\"\n    ];\n    // Check if the path starts with any of the public routes\n    const isPublicRoute = publicRoutes.some((route)=>pathname === route || pathname.startsWith(`${route}/`));\n    // Check if the path starts with any of the public API routes\n    const isPublicApiRoute = publicApiRoutes.some((route)=>pathname.startsWith(route));\n    // Allow access to public assets\n    if (pathname.startsWith(\"/_next\") || pathname.startsWith(\"/images\") || pathname.startsWith(\"/fonts\") || pathname.startsWith(\"/favicon\")) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    }\n    // Allow public routes and public API routes\n    if (isPublicRoute || isPublicApiRoute) {\n        // If already logged in, redirect from login/register pages\n        if (token && (pathname === \"/login\" || pathname.startsWith(\"/register\"))) {\n            // Redirect to appropriate dashboard based on role\n            if (token.role === _types_models__WEBPACK_IMPORTED_MODULE_2__.UserRole.ADMIN) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL(\"/admin\", request.url));\n            } else if (token.role === _types_models__WEBPACK_IMPORTED_MODULE_2__.UserRole.AGENT) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL(\"/agent\", request.url));\n            } else if (token.role === _types_models__WEBPACK_IMPORTED_MODULE_2__.UserRole.EMPLOYEE) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL(\"/employee\", request.url));\n            }\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    }\n    // Protected routes - require authentication\n    if (!token) {\n        // Redirect to login page with callback URL\n        const url = new URL(\"/login\", request.url);\n        url.searchParams.set(\"callbackUrl\", encodeURI(request.url));\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(url);\n    }\n    // Role-based access control\n    const { role, approvalStatus, isActive } = token;\n    // Check if account is inactive\n    if (!isActive) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL(\"/login?error=Account%20is%20inactive\", request.url));\n    }\n    // Check approval status for agents and employees\n    if (role !== _types_models__WEBPACK_IMPORTED_MODULE_2__.UserRole.ADMIN && role !== _types_models__WEBPACK_IMPORTED_MODULE_2__.UserRole.USER && approvalStatus !== _types_models__WEBPACK_IMPORTED_MODULE_2__.ApprovalStatus.APPROVED) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL(\"/approval\", request.url));\n    }\n    // Admin routes\n    if (pathname.startsWith(\"/admin\") && role !== _types_models__WEBPACK_IMPORTED_MODULE_2__.UserRole.ADMIN) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL(\"/\", request.url));\n    }\n    // Agent routes\n    if (pathname.startsWith(\"/agent\") && role !== _types_models__WEBPACK_IMPORTED_MODULE_2__.UserRole.AGENT) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL(\"/\", request.url));\n    }\n    // Employee routes\n    if (pathname.startsWith(\"/employee\") && role !== _types_models__WEBPACK_IMPORTED_MODULE_2__.UserRole.EMPLOYEE) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL(\"/\", request.url));\n    }\n    // Allow authenticated user to proceed\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n}\n// Configure matcher for routes to apply middleware\nconst config = {\n    matcher: [\n        /*\r\n     * Match all request paths except for:\r\n     * - _next/static (static files)\r\n     * - _next/image (image optimization files)\r\n     * - favicon.ico (favicon file)\r\n     */ \"/((?!_next/static|_next/image|favicon.ico).*)\"\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFRLEVBQzFDO1FBQ0EsT0FBT25DLHFEQUFZQSxDQUFDd0IsUUFBUSxDQUFDLElBQUlDLElBQUksYUFBYXBCLFFBQVFxQixHQUFHO0lBQy9EO0lBRUEsZUFBZTtJQUNmLElBQUlwQixTQUFTYSxVQUFVLENBQUMsYUFBYUcsU0FBU3BCLG1EQUFRQSxDQUFDcUIsS0FBSyxFQUFFO1FBQzVELE9BQU92QixxREFBWUEsQ0FBQ3dCLFFBQVEsQ0FBQyxJQUFJQyxJQUFJLEtBQUtwQixRQUFRcUIsR0FBRztJQUN2RDtJQUVBLGVBQWU7SUFDZixJQUFJcEIsU0FBU2EsVUFBVSxDQUFDLGFBQWFHLFNBQVNwQixtREFBUUEsQ0FBQ3lCLEtBQUssRUFBRTtRQUM1RCxPQUFPM0IscURBQVlBLENBQUN3QixRQUFRLENBQUMsSUFBSUMsSUFBSSxLQUFLcEIsUUFBUXFCLEdBQUc7SUFDdkQ7SUFFQSxrQkFBa0I7SUFDbEIsSUFBSXBCLFNBQVNhLFVBQVUsQ0FBQyxnQkFBZ0JHLFNBQVNwQixtREFBUUEsQ0FBQzBCLFFBQVEsRUFBRTtRQUNsRSxPQUFPNUIscURBQVlBLENBQUN3QixRQUFRLENBQUMsSUFBSUMsSUFBSSxLQUFLcEIsUUFBUXFCLEdBQUc7SUFDdkQ7SUFFQSxzQ0FBc0M7SUFDdEMsT0FBTzFCLHFEQUFZQSxDQUFDcUIsSUFBSTtBQUMxQjtBQUVBLG1EQUFtRDtBQUM1QyxNQUFNZSxTQUFTO0lBQ3BCQyxTQUFTO1FBQ1A7Ozs7O0tBS0MsR0FDRDtLQUNEO0FBQ0gsRUFBRSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxIcC1QYXZpbGlvbiBDb3JlLWk1XFxEb2N1bWVudHNcXHRlc3RcXHRlc3RcXGFsbGlhbmNlLWZpbmQtbXktYWdlbnRcXHNyY1xcbWlkZGxld2FyZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XHJcbmltcG9ydCB7IGdldFRva2VuIH0gZnJvbSBcIm5leHQtYXV0aC9qd3RcIjtcclxuaW1wb3J0IHsgVXNlclJvbGUsIEFwcHJvdmFsU3RhdHVzIH0gZnJvbSBcIkAvdHlwZXMvbW9kZWxzXCI7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWlkZGxld2FyZShyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIGNvbnN0IHsgcGF0aG5hbWUgfSA9IHJlcXVlc3QubmV4dFVybDtcclxuXHJcbiAgLy8gR2V0IHRoZSBKV1QgdG9rZW5cclxuICBjb25zdCB0b2tlbiA9IGF3YWl0IGdldFRva2VuKHtcclxuICAgIHJlcTogcmVxdWVzdCxcclxuICAgIHNlY3JldDogcHJvY2Vzcy5lbnYuTkVYVEFVVEhfU0VDUkVULFxyXG4gIH0pO1xyXG5cclxuICAvLyBQdWJsaWMgcm91dGVzIHRoYXQgZG9uJ3QgcmVxdWlyZSBhdXRoZW50aWNhdGlvblxyXG4gIGNvbnN0IHB1YmxpY1JvdXRlcyA9IFtcclxuICAgIFwiL1wiLFxyXG4gICAgXCIvbG9naW5cIixcclxuICAgIFwiL3JlZ2lzdGVyXCIsXHJcbiAgICBcIi9yZWdpc3Rlci9hZ2VudFwiLFxyXG4gICAgXCIvcmVnaXN0ZXIvZW1wbG95ZWVcIixcclxuICAgIFwiL2FwcHJvdmFsXCIsXHJcbiAgICBcIi9mb3Jnb3QtcGFzc3dvcmRcIixcclxuICAgIFwiL3Jlc2V0LXBhc3N3b3JkXCIsXHJcbiAgICBcIi9tYXBcIixcclxuICAgIFwiL3JhdGVcIixcclxuICAgIFwiL2NhbGxiYWNrXCIsXHJcbiAgXTtcclxuXHJcbiAgLy8gUHVibGljIEFQSSByb3V0ZXMgdGhhdCBkb24ndCByZXF1aXJlIGF1dGhlbnRpY2F0aW9uXHJcbiAgY29uc3QgcHVibGljQXBpUm91dGVzID0gW1xyXG4gICAgXCIvYXBpL3B1YmxpYy9cIixcclxuICAgIFwiL2FwaS9hZ2VudHMvbmVhcmJ5XCIsIC8vIE1ha2UgbmVhcmJ5IGFnZW50cyBBUEkgcHVibGljXHJcbiAgICBcIi9hcGkvYXV0aC9cIixcclxuICAgIFwiL2FwaS91c2Vycy9zZWFyY2hcIiwgXHJcbiAgICBcIi9hcGkvcmF0aW5nc1wiXHJcbiAgXTtcclxuXHJcbiAgLy8gQ2hlY2sgaWYgdGhlIHBhdGggc3RhcnRzIHdpdGggYW55IG9mIHRoZSBwdWJsaWMgcm91dGVzXHJcbiAgY29uc3QgaXNQdWJsaWNSb3V0ZSA9IHB1YmxpY1JvdXRlcy5zb21lKFxyXG4gICAgKHJvdXRlKSA9PlxyXG4gICAgICBwYXRobmFtZSA9PT0gcm91dGUgfHxcclxuICAgICAgcGF0aG5hbWUuc3RhcnRzV2l0aChgJHtyb3V0ZX0vYClcclxuICApO1xyXG5cclxuICAvLyBDaGVjayBpZiB0aGUgcGF0aCBzdGFydHMgd2l0aCBhbnkgb2YgdGhlIHB1YmxpYyBBUEkgcm91dGVzXHJcbiAgY29uc3QgaXNQdWJsaWNBcGlSb3V0ZSA9IHB1YmxpY0FwaVJvdXRlcy5zb21lKFxyXG4gICAgKHJvdXRlKSA9PiBwYXRobmFtZS5zdGFydHNXaXRoKHJvdXRlKVxyXG4gICk7XHJcblxyXG4gIC8vIEFsbG93IGFjY2VzcyB0byBwdWJsaWMgYXNzZXRzXHJcbiAgaWYgKFxyXG4gICAgcGF0aG5hbWUuc3RhcnRzV2l0aChcIi9fbmV4dFwiKSB8fFxyXG4gICAgcGF0aG5hbWUuc3RhcnRzV2l0aChcIi9pbWFnZXNcIikgfHxcclxuICAgIHBhdGhuYW1lLnN0YXJ0c1dpdGgoXCIvZm9udHNcIikgfHxcclxuICAgIHBhdGhuYW1lLnN0YXJ0c1dpdGgoXCIvZmF2aWNvblwiKVxyXG4gICkge1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5uZXh0KCk7XHJcbiAgfVxyXG5cclxuICAvLyBBbGxvdyBwdWJsaWMgcm91dGVzIGFuZCBwdWJsaWMgQVBJIHJvdXRlc1xyXG4gIGlmIChpc1B1YmxpY1JvdXRlIHx8IGlzUHVibGljQXBpUm91dGUpIHtcclxuICAgIC8vIElmIGFscmVhZHkgbG9nZ2VkIGluLCByZWRpcmVjdCBmcm9tIGxvZ2luL3JlZ2lzdGVyIHBhZ2VzXHJcbiAgICBpZiAodG9rZW4gJiYgKHBhdGhuYW1lID09PSBcIi9sb2dpblwiIHx8IHBhdGhuYW1lLnN0YXJ0c1dpdGgoXCIvcmVnaXN0ZXJcIikpKSB7XHJcbiAgICAgIC8vIFJlZGlyZWN0IHRvIGFwcHJvcHJpYXRlIGRhc2hib2FyZCBiYXNlZCBvbiByb2xlXHJcbiAgICAgIGlmICh0b2tlbi5yb2xlID09PSBVc2VyUm9sZS5BRE1JTikge1xyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QobmV3IFVSTChcIi9hZG1pblwiLCByZXF1ZXN0LnVybCkpO1xyXG4gICAgICB9IGVsc2UgaWYgKHRva2VuLnJvbGUgPT09IFVzZXJSb2xlLkFHRU5UKSB7XHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChuZXcgVVJMKFwiL2FnZW50XCIsIHJlcXVlc3QudXJsKSk7XHJcbiAgICAgIH0gZWxzZSBpZiAodG9rZW4ucm9sZSA9PT0gVXNlclJvbGUuRU1QTE9ZRUUpIHtcclxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoXCIvZW1wbG95ZWVcIiwgcmVxdWVzdC51cmwpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UubmV4dCgpO1xyXG4gIH1cclxuXHJcbiAgLy8gUHJvdGVjdGVkIHJvdXRlcyAtIHJlcXVpcmUgYXV0aGVudGljYXRpb25cclxuICBpZiAoIXRva2VuKSB7XHJcbiAgICAvLyBSZWRpcmVjdCB0byBsb2dpbiBwYWdlIHdpdGggY2FsbGJhY2sgVVJMXHJcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKFwiL2xvZ2luXCIsIHJlcXVlc3QudXJsKTtcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwiY2FsbGJhY2tVcmxcIiwgZW5jb2RlVVJJKHJlcXVlc3QudXJsKSk7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KHVybCk7XHJcbiAgfVxyXG5cclxuICAvLyBSb2xlLWJhc2VkIGFjY2VzcyBjb250cm9sXHJcbiAgY29uc3QgeyByb2xlLCBhcHByb3ZhbFN0YXR1cywgaXNBY3RpdmUgfSA9IHRva2VuO1xyXG5cclxuICAvLyBDaGVjayBpZiBhY2NvdW50IGlzIGluYWN0aXZlXHJcbiAgaWYgKCFpc0FjdGl2ZSkge1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChcclxuICAgICAgbmV3IFVSTChcIi9sb2dpbj9lcnJvcj1BY2NvdW50JTIwaXMlMjBpbmFjdGl2ZVwiLCByZXF1ZXN0LnVybCksXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLy8gQ2hlY2sgYXBwcm92YWwgc3RhdHVzIGZvciBhZ2VudHMgYW5kIGVtcGxveWVlc1xyXG4gIGlmIChcclxuICAgIHJvbGUgIT09IFVzZXJSb2xlLkFETUlOICYmXHJcbiAgICByb2xlICE9PSBVc2VyUm9sZS5VU0VSICYmXHJcbiAgICBhcHByb3ZhbFN0YXR1cyAhPT0gQXBwcm92YWxTdGF0dXMuQVBQUk9WRURcclxuICApIHtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QobmV3IFVSTChcIi9hcHByb3ZhbFwiLCByZXF1ZXN0LnVybCkpO1xyXG4gIH1cclxuXHJcbiAgLy8gQWRtaW4gcm91dGVzXHJcbiAgaWYgKHBhdGhuYW1lLnN0YXJ0c1dpdGgoXCIvYWRtaW5cIikgJiYgcm9sZSAhPT0gVXNlclJvbGUuQURNSU4pIHtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QobmV3IFVSTChcIi9cIiwgcmVxdWVzdC51cmwpKTtcclxuICB9XHJcblxyXG4gIC8vIEFnZW50IHJvdXRlc1xyXG4gIGlmIChwYXRobmFtZS5zdGFydHNXaXRoKFwiL2FnZW50XCIpICYmIHJvbGUgIT09IFVzZXJSb2xlLkFHRU5UKSB7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoXCIvXCIsIHJlcXVlc3QudXJsKSk7XHJcbiAgfVxyXG5cclxuICAvLyBFbXBsb3llZSByb3V0ZXNcclxuICBpZiAocGF0aG5hbWUuc3RhcnRzV2l0aChcIi9lbXBsb3llZVwiKSAmJiByb2xlICE9PSBVc2VyUm9sZS5FTVBMT1lFRSkge1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChuZXcgVVJMKFwiL1wiLCByZXF1ZXN0LnVybCkpO1xyXG4gIH1cclxuXHJcbiAgLy8gQWxsb3cgYXV0aGVudGljYXRlZCB1c2VyIHRvIHByb2NlZWRcclxuICByZXR1cm4gTmV4dFJlc3BvbnNlLm5leHQoKTtcclxufVxyXG5cclxuLy8gQ29uZmlndXJlIG1hdGNoZXIgZm9yIHJvdXRlcyB0byBhcHBseSBtaWRkbGV3YXJlXHJcbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XHJcbiAgbWF0Y2hlcjogW1xyXG4gICAgLypcclxuICAgICAqIE1hdGNoIGFsbCByZXF1ZXN0IHBhdGhzIGV4Y2VwdCBmb3I6XHJcbiAgICAgKiAtIF9uZXh0L3N0YXRpYyAoc3RhdGljIGZpbGVzKVxyXG4gICAgICogLSBfbmV4dC9pbWFnZSAoaW1hZ2Ugb3B0aW1pemF0aW9uIGZpbGVzKVxyXG4gICAgICogLSBmYXZpY29uLmljbyAoZmF2aWNvbiBmaWxlKVxyXG4gICAgICovXHJcbiAgICBcIi8oKD8hX25leHQvc3RhdGljfF9uZXh0L2ltYWdlfGZhdmljb24uaWNvKS4qKVwiLFxyXG4gIF0sXHJcbn07Il0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImdldFRva2VuIiwiVXNlclJvbGUiLCJBcHByb3ZhbFN0YXR1cyIsIm1pZGRsZXdhcmUiLCJyZXF1ZXN0IiwicGF0aG5hbWUiLCJuZXh0VXJsIiwidG9rZW4iLCJyZXEiLCJzZWNyZXQiLCJwcm9jZXNzIiwiZW52IiwiTkVYVEFVVEhfU0VDUkVUIiwicHVibGljUm91dGVzIiwicHVibGljQXBpUm91dGVzIiwiaXNQdWJsaWNSb3V0ZSIsInNvbWUiLCJyb3V0ZSIsInN0YXJ0c1dpdGgiLCJpc1B1YmxpY0FwaVJvdXRlIiwibmV4dCIsInJvbGUiLCJBRE1JTiIsInJlZGlyZWN0IiwiVVJMIiwidXJsIiwiQUdFTlQiLCJFTVBMT1lFRSIsInNlYXJjaFBhcmFtcyIsInNldCIsImVuY29kZVVSSSIsImFwcHJvdmFsU3RhdHVzIiwiaXNBY3RpdmUiLCJVU0VSIiwiQVBQUk9WRUQiLCJjb25maWciLCJtYXRjaGVyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(middleware)/./src/middleware.ts\n");

/***/ })

});